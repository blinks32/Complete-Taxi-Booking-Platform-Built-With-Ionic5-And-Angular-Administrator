{"version":3,"file":"src_app_pages_details_details_module_ts.js","mappings":"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","sources":["./src/app/pages/details/details-routing.module.ts","./src/app/pages/details/details.module.ts","./src/app/pages/details/details.page.ts","./src/app/pages/details/details.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { DetailsPage } from './details.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DetailsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class DetailsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DetailsPageRoutingModule } from './details-routing.module';\n\nimport { DetailsPage } from './details.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ReactiveFormsModule,\n    DetailsPageRoutingModule\n  ],\n  declarations: [DetailsPage]\n})\nexport class DetailsPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { Auth, User } from '@angular/fire/auth';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { AvatarService } from 'src/app/services/avatar.service';\nimport { OverlayService } from 'src/app/services/overlay.service';\nimport { updateProfile, updateEmail, sendEmailVerification } from 'firebase/auth';\n\n\n@Component({\n  selector: 'app-details',\n  templateUrl: './details.page.html',\n  styleUrls: ['./details.page.scss'],\n})\nexport class DetailsPage implements OnInit {\n\n  form: FormGroup;\n\n  constructor(\n    private overlay: OverlayService,\n    private authy: Auth,\n    private auth: AuthService,\n    private avatar: AvatarService,\n    private router: Router\n  ) { }\n\n  ngOnInit() {\n    this.form = new FormGroup({\n      fullname: new FormControl(null, {\n        validators: [Validators.required, Validators.minLength(1), Validators.maxLength(200)]\n      }),\n      lastname: new FormControl(null, {\n        validators: [Validators.required, Validators.minLength(1), Validators.maxLength(200)]\n      }),\n      email: new FormControl(null, {\n        validators: [Validators.required, Validators.email, Validators.maxLength(200)]\n      }),\n    });\n  }\n\n  async signIn() {\n    try {\n      if (!this.form.valid) {\n        this.form.markAllAsTouched();\n        return;\n      }\n      this.overlay.showLoader(\"\");\n\n      this.authy.onAuthStateChanged(async (user: User | null) => {\n        if (user) {\n          // Update user profile\n          await updateProfile(user, {\n            displayName: `${this.form.value.fullname} ${this.form.value.lastname}`,\n            // Note: Add photoURL if needed\n          });\n\n          // Update email\n          await updateEmail(user, this.form.value.email);\n\n          // Send email verification\n          await sendEmailVerification(user);\n\n          // Create user in Firestore\n          const result = await this.avatar.createUser(\n            user.displayName,\n            user.email,\n            user.photoURL || '',\n            user.phoneNumber || '94909220',\n            user.uid\n          );\n\n          if (!result) {\n            this.overlay.showAlert('Upload failed', 'There was a problem uploading your avatar.');\n          } else {\n            await this.avatar.createCard('Cash', 0, 'cash', 'None');\n            this.overlay.hideLoader();\n            this.router.navigateByUrl('home');\n          }\n          console.log(\"Uploaded\");\n        }\n      });\n    } catch (e) {\n      console.log(e);\n      this.overlay.hideLoader();\n    }\n  }\n}\n","<ion-header [translucent]=\"true\" class=\"ion-no-border ion-padding\">\n  <ion-list>\n    <ion-list-header class=\"ion-padding-top\">\n      <ion-label color=\"primary\" class=\"ion-text-center\">\n        <h1>Personal Info</h1>\n      </ion-label>\n    </ion-list-header>\n\n    <ion-item-group class=\"ion-margin-horizontal\">\n      <form [formGroup]=\"form\">\n\n        <div class=\"ion-margin-vertical\">\n          <ion-item class=\"ion-margin\">\n            <ion-input \n              formControlName=\"fullname\" \n              placeholder=\"First Name\" \n              type=\"text\"\n              minlength=\"1\"\n              maxlength=\"200\">\n            </ion-input>\n          </ion-item>\n\n          <ion-item class=\"ion-margin\">\n            <ion-input \n              formControlName=\"lastname\" \n              placeholder=\"Last Name\" \n              type=\"text\"\n              minlength=\"1\"\n              maxlength=\"200\">\n            </ion-input>\n          </ion-item>\n\n          <ion-item class=\"ion-margin\">\n            <ion-input \n              formControlName=\"email\" \n              placeholder=\"Your Email\" \n              type=\"email\" \n              minlength=\"1\"\n              maxlength=\"200\">\n            </ion-input>\n          </ion-item>\n        </div>\n\n      </form>\n\n      <ion-button size=\"large\" type=\"submit\" [disabled]=\"!form.valid\" color=\"primary\" (click)=\"signIn()\" expand=\"block\">\n        Continue\n        <ion-icon color='light' slot=\"end\" name=\"arrow-forward\"></ion-icon>\n      </ion-button>\n\n    </ion-item-group>\n  </ion-list>\n</ion-header>\n\n<ion-content class=\"ion-no-border\">\n  <ion-list class=\"ion-no-padding\" lines=\"none\">\n  </ion-list>\n</ion-content>\n"],"names":["FormControl","FormGroup","Validators","updateProfile","updateEmail","sendEmailVerification","DetailsPage","constructor","overlay","authy","auth","avatar","router","ngOnInit","form","fullname","validators","required","minLength","maxLength","lastname","email","signIn","_this","_asyncToGenerator","valid","markAllAsTouched","showLoader","onAuthStateChanged","_ref","user","displayName","value","result","createUser","photoURL","phoneNumber","uid","showAlert","createCard","hideLoader","navigateByUrl","console","log","_x","apply","arguments","e","i0","ɵɵdirectiveInject","i1","OverlayService","i2","Auth","i3","AuthService","i4","AvatarService","i5","Router","selectors","decls","vars","consts","template","DetailsPage_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵlistener","DetailsPage_Template_ion_button_click_15_listener","ɵɵproperty","ɵɵadvance"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}