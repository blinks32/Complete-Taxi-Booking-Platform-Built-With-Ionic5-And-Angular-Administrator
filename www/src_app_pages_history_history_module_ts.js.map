{"version":3,"file":"src_app_pages_history_history_module_ts.js","mappings":"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","sources":["./src/app/pages/history/history-routing.module.ts","./src/app/pages/history/history.module.ts","./src/app/pages/history/history.page.ts","./src/app/pages/history/history.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { HistoryPage } from './history.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HistoryPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class HistoryPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { HistoryPageRoutingModule } from './history-routing.module';\n\nimport { HistoryPage } from './history.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    HistoryPageRoutingModule\n  ],\n  declarations: [HistoryPage]\n})\nexport class HistoryPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { NavController } from '@ionic/angular';\nimport { Firestore, collection, getDocs } from '@angular/fire/firestore';\nimport { Auth } from '@angular/fire/auth';\nimport { catchError, finalize } from 'rxjs/operators';\nimport { of } from 'rxjs';\n\n@Component({\n  selector: 'app-history',\n  templateUrl: './history.page.html',\n  styleUrls: ['./history.page.scss'],\n})\nexport class HistoryPage implements OnInit {\n  histories: any[] = [];\n  loading: boolean = true;\n\n  constructor(private nav: NavController, private firestore: Firestore, private auth: Auth) { }\n\n  ngOnInit() {\n    this.loadHistory();\n  }\n\n  goBack() {\n    this.nav.pop();\n  }\n\n  async loadHistory() {\n    try {\n      const userId = this.auth.currentUser.uid;\n      const historyRef = collection(this.firestore, `Riders/${userId}/History`);\n      const snapshot = await getDocs(historyRef);\n      this.histories = snapshot.docs.map(doc => doc.data());\n      console.log('Fetched data:', this.histories); // Debugging log\n    } catch (error) {\n      console.error('Error fetching history:', error); // Handle any errors\n    } finally {\n      this.loading = false; // Ensure loading is set to false after data is fetched\n    }\n  }\n}\n","<ion-header class=\"ion-no-border\" [translucent]=\"true\">\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-button color=\"primary\">\n        <ion-back-button></ion-back-button>\n      </ion-button>\n    </ion-buttons>\n    <ion-title>History</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content>\n  <!-- Skeleton loaders while data is loading -->\n  <ion-list *ngIf=\"loading; else loadedContent\">\n    <ion-item *ngFor=\"let item of [1, 2, 3, 4, 5]\">\n      <ion-avatar slot=\"start\">\n        <ion-skeleton-text animated></ion-skeleton-text>\n      </ion-avatar>\n      <ion-label>\n        <h2><ion-skeleton-text animated style=\"width: 80%;\"></ion-skeleton-text></h2>\n        <p><ion-skeleton-text animated style=\"width: 60%;\"></ion-skeleton-text></p>\n        <p><ion-skeleton-text animated style=\"width: 40%;\"></ion-skeleton-text></p>\n        <p><ion-skeleton-text animated style=\"width: 50%;\"></ion-skeleton-text></p>\n      </ion-label>\n    </ion-item>\n  </ion-list>\n\n  <!-- Loaded content after data fetching is complete -->\n  <ng-template #loadedContent>\n    <ion-list *ngIf=\"histories.length > 0; else noData\">\n      <ion-item *ngFor=\"let history of histories\">\n        <ion-avatar slot=\"start\">\n          <ion-img [src]=\"history.Driver_imgUrl\"></ion-img>\n        </ion-avatar>\n        <ion-label>\n          <h2>{{ history.Driver_name }}</h2>\n          <p>{{ history.Driver_car }} - {{ history.Driver_plate }}</p>\n          <p>Rating: {{ history.Driver_rating }}</p>\n          <p>{{ history.time?.toDate() | date: 'short' }}</p>\n        </ion-label>\n      </ion-item>\n    </ion-list>\n  </ng-template>\n\n  <!-- No Data - show SVG when there is no history -->\n  <ng-template #noData>\n    <ion-img src=\"../assets/imgs/empty.svg\"></ion-img>\n    <ion-list-header style=\"margin-top: 10%\">\n      <ion-label color=\"primary\" class=\"ion-text-center\">\n        <h1>No Data</h1>\n        <p>Book a ride to see History</p>\n      </ion-label>\n    </ion-list-header>\n  </ng-template>\n</ion-content>\n"],"names":["collection","getDocs","i0","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵtemplate","HistoryPage_ion_list_8_ion_item_1_Template","ɵɵadvance","ɵɵproperty","ɵɵpureFunction0","_c0","ɵɵtext","history_r9","Driver_imgUrl","ɵɵtextInterpolate","Driver_name","ɵɵtextInterpolate2","Driver_car","Driver_plate","ɵɵtextInterpolate1","Driver_rating","ɵɵpipeBind2","time","toDate","HistoryPage_ng_template_9_ion_list_0_ion_item_1_Template","ctx_r7","histories","HistoryPage_ng_template_9_ion_list_0_Template","ctx_r2","length","_r3","HistoryPage","constructor","nav","firestore","auth","loading","ngOnInit","loadHistory","goBack","pop","_this","_asyncToGenerator","userId","currentUser","uid","historyRef","snapshot","docs","map","doc","data","console","log","error","ɵɵdirectiveInject","i1","NavController","i2","Firestore","i3","Auth","selectors","decls","vars","consts","template","HistoryPage_Template","rf","ctx","HistoryPage_ion_list_8_Template","HistoryPage_ng_template_9_Template","ɵɵtemplateRefExtractor","HistoryPage_ng_template_11_Template","_r1"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}